//file:noinspection GroovyAssignabilityCheck
pluginManagement {
    repositories {
        gradlePluginPortal()
    }
}

boolean isCiTask = System.getenv("CI_JOB_TOKEN") != null;

dependencyResolutionManagement {
    repositories {
        mavenCentral()
        maven {
            name = 'Paper'
            url = 'https://repo.papermc.io/repository/maven-public/'
        }
        maven {
            url = "https://gitlab.com/api/v4/groups/76713909/-/packages/maven"
            name = "GitLab"
//            if (!isCiTask) {
//                credentials(HttpHeaderCredentials) {
//                    name = 'Private-Token'
//                    value = System.getenv("GITLAB_PRIVATE_TOKEN") //Ваш GitLab токен
//                }
//            } else {
            credentials(HttpHeaderCredentials) {
                name = 'Job-Token'
                value = System.getenv("CI_JOB_TOKEN") //Ваш GitLab токен
            }
            authentication {
                header(HttpHeaderAuthentication)
            }
        }
    }
}

rootProject.name = 'springlify'
[
        'springlify-commons',
        'springlify-velocity',
        'springlify-bukkit',
        'springlify-data-jpa',

].forEach {
    include it
}

rootProject.children.each { project ->
    {
        project.buildFileName = "${project.name}.gradle"
        project.children.each { subproject ->
            {
                subproject.buildFileName = "${subproject.name}.gradle"
            }
        }
    }
}

